#
# DO NOT EDIT THIS FILE! Please edit the files in tests/integration/common instead.
#
---
- name: Check if cleanup.yml exists
  stat:
    path: "{{ role_path }}/tasks/cleanup.yml"
  register: cleanup_file

- name: Check if prepare.yml exists
  stat:
    path: "{{ role_path }}/tasks/prepare.yml"
  register: prepare_file

- name: Include cleanup tasks
  ansible.builtin.include_tasks: cleanup.yml
  when: cleanup_file.stat.exists

- name: Include prepare tasks
  ansible.builtin.include_tasks: prepare.yml
  when: prepare_file.stat.exists

- block:
    - name: Include test tasks
      ansible.builtin.include_tasks: test.yml

  always:
    - name: Include cleanup tasks
      ansible.builtin.include_tasks: cleanup.yml
      when: cleanup_file.stat.exists
